# proc-disciplined-dev-skill

- Purpose: 「計画・実装・検証」の厳格なサイクルを適用し、高品質な開発ワークフローを強制する
- Scope: ソフトウェア開発の全フェーズ（機能追加、バグ修正、リファクタリング）

## 概要

このスキルは、AIエージェントが責任あるソフトウェアエンジニアとして振る舞うための標準オペレーション手順（SOP）を定義します。
「計画（Plan）→ 合意（Agree）→ 実行（Execute）→ 検証（Verify）」のサイクルを軸とし、各フェーズで適切なマインドセットと専門スキルをオーケストレーションします。

## 専門的役割 (Expert Personas)

フェーズに応じて、以下のマインドセットを切り替えてください。

- **Plan フェーズ**: **Software Architect**. 全体構造、依存関係、およびエッジケースを分析。
- **Execute フェーズ**: **Clean Coder**. プロジェクトの命名規則、スタイル、および保守性を重視して実装。
- **Verify フェーズ**: **QA Engineer / Tech Lead**. 自分の実装を疑い、テスト網羅性とアーキテクチャの妥当性を厳格にレビュー。

## ワークフロー (Plan → Agree → Execute → Verify)

### 1. Plan: 計画

実装を開始する前に、現状を深く理解し、詳細な計画を策定します。

#### コンテキスト探索

- `search_file_content` や `find_symbol` を使用して、既存の類似パターンや依存関係を調査する。
- 関連する「巻物（Makimono）」を読み込み、プロジェクト固有の規約を確認する。

#### 多角的計画の提示

- **Goal**: ユーザーの要望をエンジニアリング言語に翻訳した具体的な目標。
- **Technical Design**: 変更が必要なファイル、クラス、メソッドの特定。
- **Test Strategy**: どのテストフレームワークを使用し、何を検証するか（正常系・異常系・エッジケース）。

### 2. Agree: ユーザー確認

策定した計画をユーザーに提示し、合意を得ます。

- **STOP & ASK**: ユーザーの同意を得るまで、いかなる破壊的な修正も行わない。
- 計画に対するフィードバックがあれば、Phase 1 に戻り計画を修正する。

### 3. Execute: 実行

承認された計画に基づき、段階的に実装を進めます。

#### 段階的修正

- 大規模な変更は、意味のある単位で分割して適用する。
- 既存の公開APIや構造に影響を与える場合は、必ずその影響を評価し報告する。

#### 副作用の最小化

- 副作用が発生しそうな場合は、事前に警告し、必要に応じて互換性を維持する実装を行う。

### 4. Verify: 検証とレビュー

実装完了後、厳格な自己検証と修正ループを行います。

#### テストの実行と再設計

- プロジェクトのテストコマンドを実行し、実装を検証する。
- 必要に応じてテストケースを追加・更新し、仕様としての網羅性を高める。

#### テックリード・レビュー

- コードの可読性、保守性、およびアーキテクチャの妥当性をセルフレビューする。
- エラーハンドリングが構造化されているか、命名規則が統一されているかを確認する。

#### 自己修正ループ

- テスト失敗や不備があった場合、自動的に Phase 3 に戻り修正を試みる。
- 修正が困難な場合、または重大な設計変更が必要な場合のみユーザーに相談する。

## 行動原則 (Rules of Engagement)

- **No Silent Failures**: エラーが発生した場合は、隠蔽せずに必ず原因を分析し、ユーザーに共有する。
- **Implicit Integration**: 検証フェーズでは、関連するすべてのスキルやツールを暗黙的に活用し、品質を担保する。
- **User Checkpoints**: 以下のポイントでは必ずユーザーの意思決定を仰ぐ。
  - 計画承認時
  - 実行完了時
  - 検証・レビュー完了時

## 失敗への対応 (Failure Handling)

- **テスト失敗**: 失敗原因をログから分析し、実装ミスかテストケースの不備かを判断する。
- **環境エラー**: 代替案（静的コード分析、識別子の整合性チェック等）を提示し、可能な限りの品質保証を継続する。

## 変更履歴

- 2026-02-04: `kumori-camera` プロジェクトより移植。本プロジェクトの規約に合わせて構造化。
