# Equivalence Partitioning Technique Guide

- Purpose: ISTQB準拠の同値分割法の詳細ガイド
- Scope: 同値分割法の適用基準、分類方法、注意事項

## 同値クラスとは

同値クラスとは、システムが同じ方法で処理すると合理的に期待できる入力値の集合である。同値クラス内のいずれの値を選択しても、同一の振る舞いが観察される。

## 有効クラスと無効クラスの分類方法

### 有効同値クラス

仕様で定義された正常な入力値の集合。システムが正常に処理し、期待される出力を生成する。

- 仕様に明記された許容範囲内の値
- 正常系のビジネスルールを満たす値

### 無効同値クラス

仕様の範囲外の入力値の集合。システムがエラーハンドリングやバリデーションで処理する。

- 許容範囲外の値
- 不正なフォーマット
- null/空値（仕様で許容されていない場合）

## データ型別の分割基準

### 連続値（数値範囲）

| クラス | 説明 | 例（1-100の範囲） |
| --- | --- | --- |
| 有効クラス | 範囲内の値 | 50 |
| 無効クラス（下限未満） | 最小値未満 | 0, -1 |
| 無効クラス（上限超過） | 最大値超過 | 101, 999 |

### 離散値（列挙型）

| クラス | 説明 | 例（色の選択: 赤/青/緑） |
| --- | --- | --- |
| 有効クラス1 | 各有効値ごとに1クラス | 赤 |
| 有効クラス2 | | 青 |
| 有効クラス3 | | 緑 |
| 無効クラス | 定義外の値 | 黄 |

### ブール値

| クラス | 説明 |
| --- | --- |
| 有効クラス1 | true |
| 有効クラス2 | false |

### 集合（複数選択）

| クラス | 説明 | 例（1-5個選択可能） |
| --- | --- | --- |
| 有効クラス | 許容個数の選択 | 3個選択 |
| 無効クラス（不足） | 最小未満の選択 | 0個選択 |
| 無効クラス（超過） | 最大超過の選択 | 6個選択 |

## 代表値の選択指針

1. **クラスの中央付近**: 境界から離れた典型的な値を選択する
2. **業務的に意味のある値**: 実際の運用で使用されそうな値を優先する
3. **ランダム性の確保**: 常に同じ代表値を使わず、バリエーションを持たせる

## 注意事項

### 過少分割の回避

- 1つのクラスに異なる処理が適用される値が混在していないか確認する
- 仕様書の条件分岐を見落としていないか再確認する
- 例: 「1-100の数値入力」でも、1-50と51-100で処理が異なる場合は別クラスとする

### 過多分割の回避

- 同一の処理が適用される値を不必要に細分化していないか確認する
- テストケース数の爆発を防ぐため、真に異なる振る舞いが期待されるもののみを別クラスとする
- 例: 無効な文字入力を文字種ごとに分割する必要があるのは、文字種ごとに異なるエラー処理がある場合のみ

### 複数パラメータの扱い

- 有効クラスのテストでは、1つのテストケースで複数パラメータの有効クラスをカバー可能
- 無効クラスのテストでは、必ず1パラメータのみを無効にし、他は有効値とする
- パラメータ間に依存関係がある場合は、依存関係を考慮したクラス分割を行う
