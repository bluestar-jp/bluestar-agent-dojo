# Branch Coverage Testing Guide

- Purpose: 分岐網羅テストの詳細ガイド（ISTQB準拠）
- Scope: カバレッジ計算、MC/DC、限界と補完

## 概要

分岐網羅テストは、コード内のすべての分岐（true/false）を最低1回実行するテストケースを設計する技法である。ステートメントカバレッジより強力な基準。

## ステートメントカバレッジとの違い

| 基準 | カバー対象 | 強度 |
| --- | --- | --- |
| ステートメント | 各文を1回実行 | 弱 |
| 分岐（ブランチ） | 各分岐結果を1回実行 | 中 |
| 条件（コンディション） | 各条件のtrue/false | 強 |
| MC/DC | 各条件が独立に結果に影響 | 最強 |

## 分岐カバレッジの計算

```text
分岐カバレッジ = (実行された分岐結果数) / (全分岐結果数) × 100%
```

例: if-else文が3つ → 全分岐結果数 = 6（各if文のtrue/false）

## 分岐点の種類

| 構造 | 分岐数 |
| --- | --- |
| if (without else) | 2 (true, false) |
| if-else | 2 (true branch, false branch) |
| switch (N cases + default) | N+1 |
| ternary (? :) | 2 |
| && (短絡評価) | 各条件でtrue/false |
| \|\| (短絡評価) | 各条件でtrue/false |

## MC/DC（Modified Condition/Decision Coverage）

安全性が重要なシステム（DO-178C Level A等）で要求される。

### 原則

- 各条件が独立して判定結果に影響することを示す
- 条件Aがtrue→falseに変化したとき、他の条件が同一で判定結果が変化

### テストケース数

- N個の条件 → MC/DCに必要なテストケース数: N+1（最小）

## カバレッジ100%の限界

- デッドコード（到達不能コード）があると100%達成不可
- 100%達成でもバグがないことは保証しない
- 仕様の欠陥（そもそもコードに実装されていない機能）は検出不可

## 補完戦略

- 分岐カバレッジ + 同値分割/境界値分析の組合せが効果的
- 複合条件にはMC/DCを追加適用
- 例外ハンドラの分岐も忘れずにカバー
