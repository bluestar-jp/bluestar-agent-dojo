# Decision Table Testing Technique Guide

- Purpose: ISTQB準拠のディシジョンテーブルテストの詳細ガイド
- Scope: ディシジョンテーブルの作成方法、簡略化、注意事項

## ディシジョンテーブルテストとは

ディシジョンテーブルテストは、複数の条件とその組合せによって異なるアクションが実行されるビジネスルールを体系的にテストする技法である。条件の組合せを網羅的に列挙することで、仕様の漏れや矛盾を早期に発見できる。

## 完全ディシジョンテーブル

### 構造

| | R1 | R2 | R3 | R4 |
| --- | --- | --- | --- | --- |
| C1: 条件1 | T | T | F | F |
| C2: 条件2 | T | F | T | F |
| A1: アクション1 | X | X | | |
| A2: アクション2 | | | X | X |

- **条件部（上部）**: 各条件のtrue(T)/false(F)の組合せ
- **アクション部（下部）**: 各ルールで実行されるアクション（X: 実行）
- **ルール数**: 条件がN個の場合、2^N個のルールが存在する

### 作成手順

1. 条件をリストアップし、上から順に記入する
2. 最下行の条件からT/Fを交互に記入する
3. 1つ上の行では2列ずつT/Fを交互に記入する（以降同様に倍増）
4. 各ルールに対するアクションを仕様に基づき記入する

## 簡略化ディシジョンテーブル

### 統合ルール

ある条件の真偽に関係なく同じアクションが実行される場合、その条件をDon't Care（-）として統合できる。

| | R1 | R2 | R3 |
| --- | --- | --- | --- |
| C1: 条件1 | T | F | F |
| C2: 条件2 | - | T | F |
| A1: アクション1 | X | X | |
| A2: アクション2 | | | X |

上記の例では、C1がTrueの場合、C2の値に関係なくA1が実行されるため統合されている。

### 簡略化の手順

1. 同一のアクションパターンを持つルールを特定する
2. 異なる条件が1つだけのルールペアを統合する
3. 統合不可能なルールはそのまま残す
4. 簡略化後のルール数が削減されていることを確認する

## 条件数の爆発への対処

### 条件数とルール数の関係

| 条件数 | ルール数（完全テーブル） |
| --- | --- |
| 2 | 4 |
| 3 | 8 |
| 4 | 16 |
| 5 | 32 |
| 6 | 64 |

### 条件数 > 4の場合の戦略

1. **条件のグループ化**: 関連する条件をサブテーブルに分割する
2. **リスクベースの削減**: 重要度の低い条件の組合せを省略する
3. **ペアワイズ法との併用**: 全組合せではなく、2条件間の組合せを網羅する
4. **階層化**: 上位の条件で分岐し、下位の条件を別テーブルで管理する

### 分割の基準

- ビジネスプロセスの段階ごとに条件を分割する
- 独立した条件グループを特定する
- 条件間の依存関係が強いものを同一テーブルにまとめる

## Don't Care条件の扱い

### 定義

Don't Care（-）とは、その条件の値がアクションの決定に影響しないことを示す。

### テストケースへの変換

Don't Care条件を含むルールからテストケースを導出する際は、以下の方針で具体値を割り当てる:

1. **基本方針**: trueまたはfalseのいずれかを任意に選択する
2. **カバレッジ向上**: 他のテストケースでカバーされていない値を優先する
3. **リスク考慮**: より高リスクな値を優先する

### 注意点

- Don't Careは「テスト不要」ではなく「どちらでもよい」の意味
- テスト実行時には必ず具体的な値を設定する

## 優先度付け

### 高優先度

- ビジネス上の重要度が高いルール
- 過去に欠陥が発生した条件の組合せ
- 例外処理やエラーハンドリングに関わるルール

### 中優先度

- 通常の業務フローに関わるルール
- 簡略化で統合されたルールの個別パターン

### 低優先度

- 発生頻度が極めて低い条件の組合せ
- 他のテスト技法でカバー済みの組合せ

## 仕様の漏れの検出

ディシジョンテーブルの作成過程で以下の問題を発見できる:

1. **未定義のルール**: アクションが指定されていない条件の組合せ
2. **矛盾するルール**: 同じ条件の組合せに対して異なるアクションが指定されている
3. **冗長なルール**: 不要な条件が含まれているルール

これらの問題を発見した場合は、仕様の修正をステークホルダーに提案する。
